import{j as d,r as c}from"./vendor-77yDWcJJ.js";import{A as x,m as p}from"./motion-KXh7TDlr.js";const y=({open:t,message:n,actionLabel:r="Annulla",onUndo:u,onClose:l})=>d.jsx(x,{children:t&&d.jsxs(p.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},exit:{opacity:0,y:6},transition:{duration:.18},className:"fixed bottom-6 left-1/2 z-50 flex -translate-x-1/2 items-center gap-3 rounded-full border border-[rgba(0,0,0,0.08)] bg-white/95 px-4 py-2 text-sm text-[#0f172a] shadow-[0_12px_30px_-22px_rgba(15,23,42,0.4)] backdrop-blur-sm",role:"status",children:[d.jsx("span",{children:n}),d.jsx("button",{type:"button",onClick:()=>{u(),l()},className:"rounded-full px-3 py-1 text-sm font-semibold text-[#0f172a] hover:bg-[#f1f5f9] transition duration-[120ms]",children:r})]})}),g=t=>`ws-categories-${t}`,o=["Maglietta","Felpa","Pantaloni","Giacca","Cappotto"],w=t=>{if(typeof window>"u")return o;try{const n=localStorage.getItem(g(t));if(!n)return o;const r=JSON.parse(n);return r.length?r:o}catch{return o}},f=(t,n)=>{if(!(typeof window>"u"))try{localStorage.setItem(g(t),JSON.stringify(n)),window.dispatchEvent(new CustomEvent("ws-categories-updated",{detail:{profile:t,categories:n}}))}catch{}},E=t=>{const[n,r]=c.useState(o);c.useEffect(()=>{r(w(t))},[t]),c.useEffect(()=>{const i=a=>{const e=a.detail;if(!e||e.profile!==t||!Array.isArray(e.categories))return;const s=e.categories.filter(m=>typeof m=="string");r(s.length?s:o)};return window.addEventListener("ws-categories-updated",i),()=>window.removeEventListener("ws-categories-updated",i)},[t]);const u=c.useCallback(i=>{const a=i.trim();a&&r(e=>{if(e.includes(a))return e;const s=[...e,a].sort();return f(t,s),s})},[t]),l=c.useCallback(i=>{r(a=>{const e=a.filter(s=>s!==i);return f(t,e),e.length?e:o})},[t]);return{categories:n,addCategory:u,removeCategory:l}};export{y as U,E as u};
